<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>(译)Go naming conventions | STep by STep</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="本文的内容是Andrew Gerrand在Meetup Golang Paris上一次演讲slide的翻译(youtube，slide)，内容是Go里面的一些命名的规范与建议。内容不错，在这里记录分享。
Names matter可读性定义代码的质量。
好的命名对可读性非常重要。
好的命名是: 

连续(容易理解)
简短(便于输入)
准确(易于理解)

A rule of thumb一个常用的经验法">
<meta property="og:type" content="article">
<meta property="og:title" content="(译)Go naming conventions">
<meta property="og:url" content="http://sineyuan.github.io/2017/01/27/go-naming/index.html">
<meta property="og:site_name" content="STep by STep">
<meta property="og:description" content="本文的内容是Andrew Gerrand在Meetup Golang Paris上一次演讲slide的翻译(youtube，slide)，内容是Go里面的一些命名的规范与建议。内容不错，在这里记录分享。
Names matter可读性定义代码的质量。
好的命名对可读性非常重要。
好的命名是: 

连续(容易理解)
简短(便于输入)
准确(易于理解)

A rule of thumb一个常用的经验法">
<meta property="og:updated_time" content="2017-01-28T07:15:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="(译)Go naming conventions">
<meta name="twitter:description" content="本文的内容是Andrew Gerrand在Meetup Golang Paris上一次演讲slide的翻译(youtube，slide)，内容是Go里面的一些命名的规范与建议。内容不错，在这里记录分享。
Names matter可读性定义代码的质量。
好的命名对可读性非常重要。
好的命名是: 

连续(容易理解)
简短(便于输入)
准确(易于理解)

A rule of thumb一个常用的经验法">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">STep by STep</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about/index.html">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://sineyuan.github.io"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/SineYuan" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about/index.html" class="mobile-nav-link">About</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://sineyuan.github.io"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/02/tensorflow-mnist-pratice/">Tensorflow Mnist手写数字识别Go实战</a>
          </li>
        
          <li>
            <a href="/2017/02/19/tensorflow-windows-installation/">在Windows上安装Tensorflow</a>
          </li>
        
          <li>
            <a href="/2017/01/27/go-naming/">(译)Go naming conventions</a>
          </li>
        
          <li>
            <a href="/2016/08/28/go-error-handle/">Golang错误处理</a>
          </li>
        
          <li>
            <a href="/2016/05/29/deploy-k8s-on-coreos/">CoreOS部署kubernetes</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
        <section id="main"><article id="post-go-naming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/27/go-naming/" class="article-date">
  <time datetime="2017-01-26T16:00:00.000Z" itemprop="datePublished">2017-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      (译)Go naming conventions
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文的内容是Andrew Gerrand在Meetup Golang Paris上一次演讲slide的翻译(<a href="https://www.youtube.com/watch?v=sFUSP8Au_PE" target="_blank" rel="external">youtube</a>，<a href="https://talks.golang.org/2014/names.slide#1" target="_blank" rel="external">slide</a>)，内容是Go里面的一些命名的规范与建议。内容不错，在这里记录分享。</p>
<h2 id="Names_matter">Names matter</h2><p>可读性定义代码的质量。</p>
<p>好的命名对可读性非常重要。</p>
<p>好的命名是: </p>
<ul>
<li>连续(容易理解)</li>
<li>简短(便于输入)</li>
<li>准确(易于理解)</li>
</ul>
<h2 id="A_rule_of_thumb">A rule of thumb</h2><p>一个常用的经验法则是：一个命名声明与使用的地方的距离越大，那么这个名字应该越长。</p>
<h2 id="Use_MixedCase">Use MixedCase</h2><p>在Go应使用驼峰命名法(不要使用下划线命名)。</p>
<p>首字母应该大写，像<code>ServeHTTP</code> 和 <code>IDProcessor</code></p>
<h2 id="Local_variables">Local variables</h2><p>本地变量应保持简短，长短命名将有碍阅读。</p>
<p>例如一些常用的约定：<br>使用 <code>i</code> 表示索引。<br>使用 <code>r</code> 表示reader。</p>
<p>长命名可能对于很长的函数或有很对本地变量的函数很有用，但那通常表示你的代码需要重构了。</p>
<h3 id="坏🌰">坏🌰</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func RuneCount(buffer []<span class="keyword">byte</span>) <span class="keyword">int</span> &#123;</span><br><span class="line">    <span class="keyword">index</span>, <span class="keyword">count</span> := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">index</span> &lt; len(buffer) &#123;</span><br><span class="line">        <span class="keyword">if</span> buffer[<span class="keyword">index</span>] &lt; RuneSelf &#123;</span><br><span class="line">            <span class="keyword">index</span>++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _, size := DecodeRune(buffer[<span class="keyword">index</span>:])</span><br><span class="line">            <span class="keyword">index</span> += size</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">count</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="好🌰">好🌰</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func RuneCount(b []<span class="typename">byte</span>) <span class="typename">int</span> &#123;</span><br><span class="line">    i, <span class="string">n :</span>= <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i &lt; len(b) &#123;</span><br><span class="line">        <span class="keyword">if</span> b[i] &lt; RuneSelf &#123;</span><br><span class="line">            i++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _, <span class="string">size :</span>= DecodeRune(b[<span class="string">i:</span>])</span><br><span class="line">            i += size</span><br><span class="line">        &#125;</span><br><span class="line">        n++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参数">参数</h2><p>函数的参数作用像本地变量，但它们还具有文档的功能。</p>
<p>当参数类型具有描述性时，使用短命名。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">AfterFunc</span><span class="params">(d Duration, f <span class="keyword">func</span><span class="params">()</span></span></span>) *<span class="type">Timer</span></span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">Escape</span><span class="params">(w io.Writer, s []byte)</span></span></span><br></pre></td></tr></table></figure>
<p>当参数类型很模糊时(例如原生类型，相同的类型的参数时)，那么参数名字需要像文档一样说明。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">Unix</span><span class="params">(sec, nsec int64)</span></span> <span class="type">Time</span></span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">HasPrefix</span><span class="params">(s, <span class="keyword">prefix</span> []byte)</span></span> bool</span><br></pre></td></tr></table></figure></p>
<h2 id="返回值">返回值</h2><p>对于一个对外发布的函数，返回值应命名应像文档一样说明返回值的作用。</p>
<p>好的例子：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Copy</span><span class="params">(dst Writer, src Reader)</span> <span class="params">(written int64, err error)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanBytes</span><span class="params">(data []byte, atEOF bool)</span> <span class="params">(advance int, token []byte, err error)</span></span></span><br></pre></td></tr></table></figure></p>
<h2 id="Receivers">Receivers</h2><p>Receivers是一种特殊类型的参数</p>
<p>通常情况，使用一到两个其类型简写的字符表示，因为在方法里面他们会经常出现</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Buffer)</span> <span class="title">Read</span><span class="params">(p []byte)</span> <span class="params">(n int, err error)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(sh serverHandler)</span> <span class="title">ServeHTTP</span><span class="params">(rw ResponseWriter, req *Request)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Rectangle)</span> <span class="title">Size</span><span class="params">()</span> <span class="title">Point</span></span></span><br></pre></td></tr></table></figure>
<p>一个类型的方法Receiver命名应保持一致(不要在一个方法里面用<code>r</code>而在另一个方法里用<code>rdr</code>)</p>
<h2 id="Exported_package-level_names">Exported package-level names</h2><p>一个包的导出的名字被其包命修饰，时时铭记这一点。<br>所以在标准库里面有<code>bytes.Buffer</code>和<code>strings.Reader</code>，而不是<code>bytes.ByteBuffer</code>,<code>strings.StringReader</code></p>
<h2 id="接口类型">接口类型</h2><p>如果一个接口里面只有一个方法，那通常给方法名后面加一个’er’就好了。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader interface &#123;</span><br><span class="line">    <span class="keyword">Read</span>(p []byte) (<span class="keyword">n</span> int, <span class="keyword">err</span> <span class="keyword">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然有时英语语法上是不对的，但我们还是这么做(but we do it anyway)<br><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="typedef"><span class="keyword">type</span> <span class="type">Execer</span> interface <span class="container">&#123;</span><br><span class="line">    <span class="type">Exec</span>(query string, args []<span class="type">Value</span>) (<span class="type">Result</span>, error)</span><br><span class="line">&#125;</span></span></span><br></pre></td></tr></table></figure></p>
<p>有时要做一些转换看起来更好<br><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="typedef"><span class="keyword">type</span> <span class="type">ByteReader</span> interface <span class="container">&#123;</span><br><span class="line">    <span class="type">ReadByte</span>() (c byte, err error)</span><br><span class="line">&#125;</span></span></span><br></pre></td></tr></table></figure></p>
<p>但一个接口包含多个方法是，选择名字需要准确的描述这个借口的作用(例如: <code>net.Conn</code>, <code>http.ResponseWriter</code>, <code>io.ReadWriter</code>)</p>
<h2 id="Error">Error</h2><p>错误类型命名类似<code>FooError</code>:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="constant">ExitError</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>错误值命名类似<code>ErrFoo</code>:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">var</span> ErrFormat = errors.<span class="function"><span class="title">New</span><span class="params">(<span class="string">"image: unknown format"</span>)</span></span></span><br></pre></td></tr></table></figure></p>
<h2 id="包命名">包命名</h2><p>对外发布的包名应该说明包的作用</p>
<p>避免使用util，common，等等</p>
<h2 id="Import_paths">Import paths</h2><p>包的最后一个部分的路径应和包名相同。<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"compress/gzip"</span> <span class="comment">// package gzip</span></span><br></pre></td></tr></table></figure></p>
<p>避免在包路径上结巴(233)。</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"code.google.com/p/goauth2/oauth2"</span> <span class="comment">// bad; my fault</span></span><br></pre></td></tr></table></figure>
<p>对于库来说，通常将代码放在根目录下。<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"github.com/golang/oauth2"</span> <span class="comment">// package oauth2</span></span><br></pre></td></tr></table></figure></p>
<p>避免大写字母(不是所有的文件系统都是大小写敏感的)。</p>
<h2 id="标准库">标准库</h2><p>文中许多例子都是来自标准库。</p>
<p>标准库是个寻找优秀Go代码的地方，常看常新。</p>
<p><em>但请记住</em>:</p>
<blockquote>
<p>When the standard library was written, we were still learning.<br>Most of it we got right, but we made some mistakes.</p>
</blockquote>
<h2 id="Conclusion">Conclusion</h2><p>Use short names.<br>使用短的名字</p>
<p>Think about context.<br>多思考上下文</p>
<p>Use your judgment.<br>要有自己的判断</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://sineyuan.github.io/2017/01/27/go-naming/" data-id="cizs22goa000bnu13beqbxym9" class="article-share-link">Share</a>
      
        <a href="http://sineyuan.github.io/2017/01/27/go-naming/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/02/19/tensorflow-windows-installation/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          在Windows上安装Tensorflow
        
      </div>
    </a>
  
  
    <a href="/2016/08/28/go-error-handle/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Golang错误处理</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <a href="/" class="logo">STep by STep</a>
      &copy; 2017 Sine Yuan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    
<script>
  var disqus_shortname = 'sineyuansblog';
  
  var disqus_url = 'http://sineyuan.github.io/2017/01/27/go-naming/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery.scrollLoading.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>